<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Install Confluent-Kafka on Apple&#39;s M1</title>
      <link href="/2023/04/18/rdkafka/"/>
      <url>/2023/04/18/rdkafka/</url>
      
        <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/confluentinc/librdkafka.git</span><br><span class="line"><span class="built_in">cd</span> librdkafka</span><br><span class="line">./configure --install-deps</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><p>if you get error like this:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmp: TAGS: No such file or directory</span><br></pre></td></tr></table></figure><p>you can try this:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">brew install openssl zstd pkg-config</span><br><span class="line"><span class="built_in">export</span> PKG_CONFIG_PATH=<span class="string">&quot;/opt/homebrew/opt/openssl@3/lib/pkgconfig&quot;</span></span><br><span class="line"><span class="built_in">export</span> LDFLAGS=<span class="string">&quot;-L/opt/homebrew/opt/openssl@3/lib&quot;</span></span><br><span class="line">brew install ctags</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/opt/homebrew/opt/openssl@3/bin:<span class="variable">$PATH</span>&quot;</span></span><br></pre></td></tr></table></figure><p>after that, you can try again:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go run -tags dynamic main.go</span><br></pre></td></tr></table></figure><p>if you get error like this:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Package libcrypto was not found <span class="keyword">in</span> the pkg-config search path.</span><br><span class="line">Perhaps you should add the directory containing `libcrypto.pc<span class="string">&#x27;</span></span><br><span class="line"><span class="string">to the PKG_CONFIG_PATH environment variable</span></span><br><span class="line"><span class="string">Package &#x27;</span>libcrypto<span class="string">&#x27;, required by &#x27;</span>rdkafka<span class="string">&#x27;, not found</span></span><br><span class="line"><span class="string">pkg-config: exit status 1</span></span><br></pre></td></tr></table></figure><p>you can try this:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PKG_CONFIG_PATH=/opt/homebrew/opt/openssl/lib/pkgconfig</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Capture Package</title>
      <link href="/2023/03/18/capture/"/>
      <url>/2023/03/18/capture/</url>
      
        <content type="html"><![CDATA[<h2 id="FeiShu-Lark-Client"><a href="#FeiShu-Lark-Client" class="headerlink" title="FeiShu(Lark) Client"></a>FeiShu(Lark) Client</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /Applications/Lark.app/Contents/MacOS</span><br><span class="line"></span><br><span class="line">sudo ./Feishu -remote-debugging-port=9222</span><br></pre></td></tr></table></figure><p>then access</p><blockquote><p>chrome:&#x2F;&#x2F;inspect&#x2F;#devices</p></blockquote><h2 id="related-articles"><a href="#related-articles" class="headerlink" title="related articles"></a>related articles</h2><p><a href="https://zhuanlan.zhihu.com/p/26182135">https://zhuanlan.zhihu.com/p/26182135</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Redis</title>
      <link href="/2023/03/18/redis/"/>
      <url>/2023/03/18/redis/</url>
      
        <content type="html"><![CDATA[<h2 id="Distributed-Lock"><a href="#Distributed-Lock" class="headerlink" title="Distributed Lock"></a>Distributed Lock</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> RedisLock struct &#123;</span><br><span class="line">  client  *redis.Client</span><br><span class="line">  <span class="built_in">timeout</span> int64</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func NewRedisLock(client *redis.Client, config *base.Config) dependency.Locker &#123;</span><br><span class="line">  <span class="built_in">return</span> &amp;RedisLock&#123;client: client, <span class="built_in">timeout</span>: config.RedisLockTimeoutSecond&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (r *RedisLock) Lock(ctx context.Context, key string) (unlockFunc func() error, success bool) &#123;</span><br><span class="line">  <span class="built_in">id</span> := uuid.New().String()</span><br><span class="line">  result := r.client.SetNX(ctx, key, <span class="built_in">id</span>, time.Duration(r.timeout)*time.Second)</span><br><span class="line">  <span class="keyword">if</span> success, err := result.Result(); err != nil || !success &#123;</span><br><span class="line">    <span class="built_in">return</span> func() error &#123; <span class="built_in">return</span> nil &#125;, <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> func() error &#123;</span><br><span class="line">    result, err := r.client.Get(ctx, key).Result()</span><br><span class="line">    <span class="keyword">if</span> err != nil &#123;</span><br><span class="line">      <span class="built_in">return</span> err</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> result == <span class="built_in">id</span> &#123;</span><br><span class="line">      <span class="built_in">return</span> r.client.Del(ctx, key).Err()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> errors.New(<span class="string">&quot;key not fount&quot;</span>)</span><br><span class="line">  &#125;, <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux Common Instructions</title>
      <link href="/2023/03/18/linux/"/>
      <url>/2023/03/18/linux/</url>
      
        <content type="html"><![CDATA[<h2 id="Shifting"><a href="#Shifting" class="headerlink" title="Shifting"></a>Shifting</h2><p>1M ï¼Ÿ 1&lt;&lt;20</p><h2 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h2><pre><code class="bash">curl -v (specific request flow)curl -o (show file name)</code></pre><h2 id="Alpine-Software-Installation"><a href="#Alpine-Software-Installation" class="headerlink" title="Alpine Software Installation"></a>Alpine Software Installation</h2><p>telnet</p><blockquote><p>apk add busybox-extras</p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Build ClickHouse Cluster based on Docker</title>
      <link href="/2022/12/05/clickhouse/"/>
      <url>/2022/12/05/clickhouse/</url>
      
        <content type="html"><![CDATA[<p>download docker-compose file<br><a href="https://github.com/jneo8/clickhouse-setup">https://github.com/jneo8/clickhouse-setup</a></p><p>modifying networks configuration</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">clickvisual-net:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br></pre></td></tr></table></figure><p>add ports </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">9001</span><span class="string">:9000</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">8123</span><span class="string">:8123</span></span><br></pre></td></tr></table></figure><p><img src="/../img/clickhouse-1.png" alt="img.png"></p>]]></content>
      
      
      
        <tags>
            
            <tag> clickhouse </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>K8s Common Instructions</title>
      <link href="/2022/02/28/kubectl/"/>
      <url>/2022/02/28/kubectl/</url>
      
        <content type="html"><![CDATA[<p>ps aux | grep kubectl</p><p>create a namespace in the k8s cluster</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl create namespace mogo</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>port exposure</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kc port-forward deployment/prometheus 9090:9090</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> k8s </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
